/**
 *  Math JavaScript Library v3.0.0
 *  https://github.com/aantthony/javascript-cas
 *  
 * Copyright 2010 Anthony Foster. All rights reserved.
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */


(function(window, undefined){
	"use strict";
	function j(F){throw F;}var w=!0,y=!1;function C(){return function(){}}
(function(F,h){function L(c){var b=Error(c).stack;b?console.warn(b.replace(/^Error\: /,"Deprecated: ")):console.warn("Deprecated: "+c)}function k(c){var b={},g=0;c.forEach(function(c){var e=c[0],d=c[2]===h?2:c[2],c=[c[1]||s,g++,d];if("object"===typeof e)for(d=0;d<e.length;d++)b[e[d]]=c;else b[e]=c});this.K=b;this.X()}function c(c,b){return u.parse(c,b)}function n(e,b){return c(e,b||n.z)}k.prototype.M=function(c){this.K[c]||j("Precedence of "+c+" not known!");return this.K[c][1]};k.prototype.U=function(c){c=
this.K[c];return 0===c[0]&&1===c[2]};k.prototype.V=function(c){return-1!=["+","-","\u00b1"].indexOf(c)?"@"+c:y};k.prototype.Y=function(c){return this.K[c][1]===w};k.prototype.X=function(){var e,b,g,d,i,m;function n(b){for(var c,e=b.length;-1!=(c=b.indexOf("\\begin"));){var d=b.indexOf("}",c+7),g=b.substring(c+7,d),f="\\end{"+g+"}",i=b.indexOf(f,d),m=b.substring(d+1,i);switch(g){case "matrix":m=m.replace(/\\\:/g,",").replace(/\\\\/g,";");b=b.split("");b[c]="[";b.splice(i,f.length-1);b[i]="]";b.splice(d+
1,i-d-1,m);b.splice(c+1,d+1-c-1);b=b.join("");break;default:j(new SyntaxError("Latex \\begin{"+g+"} block not understood."))}}for(;-1!==(c=b.indexOf("\\text"));)d=b.indexOf("}",c+6),g=b.substring(c+6,d),b=b.split(""),b.splice(c,d-c+1,"\\"+g),b=b.join("");for(;-1!==(c=b.indexOf("\\frac"));){g=y;f=0;for(d=c+5;d<e;d++)if("{"===b[d])f++;else if("}"===b[d]&&(f--,!f)){g=w;break}g||j(new SyntaxError(msg.Z));g=y;"{"!==b[d+1]&&j(new SyntaxError("Unexpected '"+b[d+1]+"' between \\frac operands"));for(m=i=d+
1;m<e;m++)if("{"===b[m])f++;else if("}"===b[m]&&(f--,!f)){g=w;break}g||j(new SyntaxError(msg.Z));b=b.split("");b[c+5]="((";b[d]=")";b[i]="(";b[m]="))";b.splice(i,0,"/");b.splice(c,5);b=b.join("")}b=b.replace(/\^([^\{\(])/g,"^{$1}");b=b.replace(/\\left\|/g,"\\abs(");b=b.replace(/\\right\|/g,")");b=b.replace(/\\\:/g," ");b=b.replace(/\\([a-z\%]+)/g,function(b,c){var e=s[c];return" "+(e!==h?e:"\\"+c)});b=b.replace(/[\[\{]/g,"(");return b=b.replace(/[\]\}]/g,")")}var s={cdot:"*",vee:"\u2228",wedge:"&&",
neg:"\u00ac",left:"",right:"",pm:"\u00b1",circ:"\u2218",div:"/","%":"%",gt:">","left|":"\\abs(","right|":")",times:"*",":":"","left(":"(","right)":")","left[":"[","right]":"]",ge:">=",lt:"<",le:"<=",sim:"~",frac:"",backslash:"\\"},B=this.K;e=2;b=3;g=4;d=5;i=6;m=7;var k="+ - @ * / ^ ++ = ! , @- @+ _ # < <= > >= %".split(" "),F=h,E=[function(){j("NONE")},function(){return y},function(b){return-1!=="1234567890.".indexOf(b[b.length-1])},function(b){return-1!==k.indexOf(b)},function(b){return" "===b[b.length-
1]},function(b){return 1==b.length&&-1!="([{".indexOf(b)},function(b){return 1==b.length&&-1!="}'])".indexOf(b)},function(b){return/^[A-Za-z]$/.test(b[b.length-1])},function(b){j(new SyntaxError("Invalid character: '"+b+"'"))}],E=[function(){j("NONE")},function(){return y},function(b){return-1!=="1234567890.".indexOf(b[b.length-1])},function(b){return-1!==k.indexOf(b)},function(b){return" "===b[b.length-1]},function(b){return 1==b.length&&-1!="([{".indexOf(b)},function(b){return 1==b.length&&-1!=
"}'])".indexOf(b)},function(b){return"\\"===b[0]?1===b.length||/^[A-Za-z]$/.test(b[b.length-1]):1===b.length&&/^[A-Za-z]$/.test(b[0])},function(b){j(new SyntaxError("Invalid character: '"+b+"'"))}];E.map(function(b){return b.name});this.parse=function(k,s){function H(b){if(b.c===e||b.c===m)o.push(b.p);else{var c=B[b.p][2];o.length<c&&j(new SyntaxError("The '"+b.p+"' operator requires exactly "+c+" operands, whereas only "+o.length+" "+(1===o.length?"was ":"were ")+"supplied, namely "+o.toString()));
c=o.splice(-c,c);b=c[0].apply(b.p,c.slice(1)[0]);o.push(b)}}function I(h,k){if(k!==g){if(k!==b&&k!==i)D!==d&&D!==b&&I(F,b);else if(k===b&&!u.U(h)&&(D===d||D===b))u.V(h)&&(h=u.V(h));var l={p:h,c:k};l.c===m&&(("\\"===l.p[0]&&(l.p=l.p.substring(1)),B[l.p])?l.c=b:"false"===l.p?l.p=y:"true"===l.p?l.p=w:"Infinity"===l.p?l.p=Infinity:"string"===typeof l.p&&(l.p=s[l.p]?s[l.p]:new c.o.d(l.p)));if(l.c===e||l.c===m)l.c==e&&(l.p=new c.f(Number(l.p))),H(l);if(l.c===b){for(var n=B[l.p][1],M=B[l.p][0],o;t.length&&
(o=t[t.length-1]).c===b&&(M==J&&n<=B[o.p][1]||M!=J&&n<B[o.p][1]);)H(t.pop());t.push(l)}l.c===d&&t.push(l);if(l.c===i){for(;t[t.length-1].c!==d;)t.length||j(new SyntaxError(msg.ea)),H(t.pop());t.pop().c!==d&&j("Pop the left parenthesis from the stack: Not found ! ")}D=k}}if(""===k)return h;var k=n(k),D=d,t=[],o=[],z=0,G=k.length,A=k[0],v;for(v=1;8>v&&!E[v](A);v++);for(z=1;z<G;z++){var K=k[z],x=A+K;if(E[v](x))A=x;else{for(x=1;8>x&&!E[x](K);x++);I(A,v);v=x;A=K}}for(I(A,v);t.length;)G=(z=t.pop()).c,(G===
d||G===i)&&j("There are mismatched parentheses."),H(z);1!==o.length&&(console.warn("Stack not the right size! ",o),j("Stack not the right size!"));return o[0]}};var d={},J,s=J=0,u=new k([[";"],[","],["=,+=,-=,*=,/=,%=,&=,^=,|=".split(","),1],[["?",":"],1,2],[["\u2228"]],[["&&"]],[["|"]],[["??????"]],[["&"]],[["==","\u2260","!==","==="]],[["<","<=",">",">="],s],[[">>","<<"]],["\u00b1",1,2],[["+"],w],[["-"],s],[["\u222b","\u2211"],1,1],[["*","%"],1],[["@+","@-","@\u00b1"],1,1],[["\u00ac"],s,1],[h,1,
2],["\u2218",1,2],[["/"]],[["^"]],["!",s,1],[["~"],1,1],[["++","++",".","->"],s,1],[["::"]],[["_"],s,2],["var",1,1],["break",1,0],["throw",1,1],["'",s,1],["\u221a",1,1],["#",1,1]]);new k([[";"],[","],[["=","+="]]]);C().prototype=Object.create(d);c.prototype=Object.create(Array.prototype);c.prototype={};c.prototype.valueOf=null;c.prototype.toString=function(){L("Slow - toString");return this.n("text/latex").b};c.prototype.constructor=c;c.a=function(e,b){e.__proto__=c.a.prototype;e.v=b;return e};c.a.prototype=
Object.create(c.prototype);c.a.prototype.constructor=c.a;c.N=function(){j(Error("Expression.Constant created"))};c.N.prototype=Object.create(c.prototype);c.N.prototype.r=function(){return n.z.t};c.o=function(c){this.I=c};c.o.prototype=Object.create(c.prototype);c.o.prototype.r=function(c){return this.I===c.I?n.z.A:n.z.t};c.o.prototype.toString=function(){return this.I};c.o.prototype.constructor=c.o;c.o.d=function(c){this.I=c};c.o.d.prototype=Object.create(c.o.prototype);c.o.d.prototype.k=function(){return c.a.l([this,
n.z.t])};c.o.d.prototype.D=function(){return this};c.o.d.prototype.C=function(){return d.t};c.o.d.prototype.L=function(){return c.a.m([c.a.d([d.abs,this]),c.a.d([d.w,this])])};c.o.d.prototype.abs=function(){return c.a.d([d.abs,this])};c.o.d.prototype.w=function(){return c.a.d([d.w,this])};c.o.d.prototype.apply=function(e,b){if(","===e)return console.log("APPLY: ",this.constructor,this,b),c.u([this,b]);if("="===e)return c.O([this,b],e);if(b===h){switch(e){case "!":return d.P.apply(h,this.apply("+",
d.A));case "@+":case "@-":return c.a.d([this],e)}j("Real Symbol("+this.I+") could not handle operator "+e)}switch(b.constructor){case c.o.d:case c.a.d:switch(e){case "^":return c.a.m([c.a.d([c.a.d([d.abs,this]),b],"^"),c.a.d([b,c.a.d([d.w,this])],"*")]);case h:return c.a.d([this,b],"*");default:return c.a.d([this,b],e)}case c.f:switch(e){case "+":case "-":return 0===b.value?this:c.a.d([this,b],e);case h:case "*":return 1===b.value?this:0===b.value?d.t:c.a.d([this,b],"*");case "%":return c.a.d([this,
b],"%");case "^":return 1===b.value?this:0===b.value?d.A:c.a.m([c.a.d([c.a.d([d.abs,this]),b],"^"),c.a.d([b,c.a.d([d.w,this])],"*")]);case "/":return 1===b.value?this:0===b.value?d.S:c.a.d([this,b],e)}break;case c.q:return this.k().apply(e,b);case c.a.l:switch(e){case "+":case "-":return c.a.l([this.apply(e,b[0]),b[1]]);case h:e="*";case "*":return c.a.l([this.apply(e,b[0]),this.apply(e,b[1])]);case "/":var g=b[0].apply("*",b[0]).apply("+",b[1].apply("*",b[1]));return c.a.l([this.apply("*",b[0]).apply("/",
g),this.apply("*",b[1]).apply("/",g).apply("@-")])}case c.a.m:return this.L().apply(e,b)}j(("LIST FROM REAL SYMBOL! "+e,b.constructor))};c.o.d.prototype.constructor=c.o.d;c.J=C();c.J.prototype=Object.create(c.prototype);c.J.prototype={};c.J.prototype.apply=C();c.J.ba=C();c.f=function(c){this.value=c};c.f.prototype=Object.create(c.N.prototype);c.f.prototype.D=function(){return this};c.f.prototype.C=function(){return d.t};c.f.prototype.k=function(){return c.l([this,d.t])};c.f.prototype.apply=function(e,
b){switch(e){case ",":return c.u([this,b]);case "^":if(0===this.value)return d.t;break;case "+":if(0===this.value)return b;break;case "-":if(0===this.value)return b.apply("@-");break;case h:case "*":if(1===this.value)return b;case "/":if(0===this.value)return d.t}if(b===h)switch(e){case "@+":return this;case "@-":return new c.f(-this.value);case "++":case "--":j(new TypeError("Postfix "+e+" operator applied to value that is not a reference."));case "+=":case "-=":case "*=":case "/=":j(new ReferenceError("Left side of assignment is not a reference."));
case "!":return d.P.apply(h,new c.f(this.value+1))}else if(b.constructor===this.constructor)switch(e){case "*":case h:return new c.f(this.value*b.value);case "+":return new c.f(this.value+b.value);case "-":return new c.f(this.value-b.value);case "/":return new c.f(this.value/b.value);case "^":if(0<this.value)return new c.f(Math.pow(this.value,b.value));var g=Math.pow(-this.value,b.value),f=Math.PI*b.value;return new c.q(g*Math.cos(f),g*Math.sin(f))}else if(b.constructor===c.q)switch(e){case "*":case h:return new c.q(this.value*
b.h,this.value*b.g);case "+":return new c.q(this.value+b.h,b.g);case "-":return new c.q(this.value-b.h,-b.g);case "/":return g=b.h*b.h+b.g*b.g,new c.q(this.value*b.h/g,-this.value*b.g/g);case "^":var i=this.value,g=b.h,f=b.g;console.error("Bad implementation ( num ^ complex)");i=0.5*Math.log(i*i);f*=i;g=Math.exp(i*g);return new c.q(g*Math.cos(f),g*Math.sin(f))}else if(b.constructor===c.a.l)switch(e){case "+":case "-":return c.a.l([b[0].apply(e,this),b[1]]);case h:e="*";case "*":case "/":return c.a.l([b[0].apply(e,
this),b[1].apply(e,this)]);case "^":return console.warn("ineffecient: NR ^ CL"),this.k().apply(e,b)}else if(b.constructor===c.a.m)switch(e){case "+":case "-":case "^":return c.a([this,b],e);case h:e="*";case "*":return c.a.m([b[0].apply(e,this),b[1]]);case "/":return c.a.m([b[0].apply(e,this),b[1]])}else if(b.constructor===c.a.d)switch(e){case h:e="*";case "*":case "+":case "-":case "/":return c.a.d([this,b],e);case "^":return 0===this.value&&j("N(0) ^ x"),0<this.value?c.a.d([this,b],e):c.a.m([(new c.W(-this.value)).apply("^",
b),d.R.apply("*",b)])}else if(b.constructor===c.o.d)switch(e){case h:e="*";case "*":case "+":case "-":case "/":return c.a.d([this,b],e);case "^":return 0===this.value&&j("N(0) ^ x"),0<this.value?c.a.d([this,b],e):c.a.m([c.a.d([new c.f(-this.value),b],"^"),d.R.apply("*",b)])}j("?? - real")};c.f.prototype.constructor=c.f;c.s=function(c,b){this.h=c;this.g=b};c.s.prototype=Object.create(c.N.prototype);c.s.prototype.D=function(){return new c.f(this.h)};c.s.prototype.C=function(){return new c.f(this.g)};
c.s.prototype.k=function(){return c.a.l([new c.f(this.h),new c.f(this.g)])};(function(){c.s.prototype.apply=function(e,b){switch(e){case "^":if(0===this.h&&0===this.g)return d.t;break;case "+":if(0===this.h&&0===this.g)return b;break;case "-":if(0===this.value)return b.apply("@-");break;case h:case "*":if(1===this.h&&0===this.g)return b;case "/":if(0===this.h&&0===this.g)return d.t}if(","===e)return c.u([this,b]);if(b===h)switch(e){case "@+":return this;case "@-":return new c.s(-this.h,-this.g);case "\u221a":j("OLD SQRT. New one is a function, not operator.");
case "++":case "--":j(new TypeError("Postfix "+e+" operator applied to value that is not a reference."));case "+=":case "-=":case "*=":case "/=":j(new ReferenceError("Left side of assignment is not a reference."));case "!":return d.P.apply(h,new c.s(this.h+1,this.g))}else if(b.constructor===c.f)switch(e){case "*":case h:return new c.s(this.h*b.value,this.g*b.value);case "+":return new c.s(this.h+b.value,this.g);case "-":return new c.s(this.h-b.value,this.g);case "/":return new c.s(this.h/b.value,
this.g/b.value);case "^":var g=this.h,f=this.g,i=b.value,m=0.5*Math.log(g*g+f*f),f=Math.atan2(f,g),g=f*i,i=Math.exp(m*i);return new c.s(i*Math.cos(g),i*Math.sin(g))}else if(b.constructor===this.constructor)switch(e){case "*":case h:return new c.s(this.h*b.h-this.g*b.g,this.h*b.g+this.g*b.h);case "+":return new c.s(this.h+b.h,this.g+b.g);case "-":return new c.s(this.h-b.h,this.g-b.g);case "/":return i=b.h*b.h+b.g*b.g,new c.s((this.h*b.h+this.g*b.g)/i,(this.g*b.h-this.h*b.g)/i);case "^":var g=this.h,
f=this.g,i=b.h,k=b.g,m=0.5*Math.log(g*g+f*f),f=Math.atan2(f,g),g=m*k+f*i,i=Math.exp(m*i-f*k);return new c.s(i*Math.cos(g),i*Math.sin(g))}else{if(b.constructor===c.a.l)return this.k().apply(e,b);if(b.constructor===c.a.m)return this.L().apply(e,b);if(b.constructor===c.a.d||b.constructor===c.o.d)return this.k().apply(e,b)}console.error("cmplx . "+e+" => E.List?");return this.k().apply(e,b)}})();c.s.prototype.constructor=c.s;c.a.prototype.r=function(e){switch(this.v){case h:if(this[0]instanceof c.J)return this[0].r(e).apply("*",
this[1].r(e));case "*":return this[0].r(e).apply("*",this[1]).apply("+",this[1].r(e).apply("*",this[0]));case "@+":case "@-":return this[0].r(e).apply(this.v);case "+":case "-":return this[0].r(e).apply(this.v,this[1].r(e));case "^":return this[0].apply("^",this[1].apply("-",d.A)).apply("*",this[1].apply("*",this[0].r(e)).apply("+",this[0].apply("*",d.log.apply(h,this[0]).apply("*",this[1].r(e)))));case "/":return this[0].r(e).apply("*",this[1]).apply("-",this[0].r(e).apply("*",this[1])).apply("/",
this[1].apply("^",new c.f(2)));default:j("Cannot differentiate "+this.v+" operator.")}};c.O=function(e,b){e.__proto__=c.O.prototype;e.v=b;return e};c.O.prototype=Object.create(c.a.prototype);c.O.prototype.apply=function(){j("Operators cannot be applied to equations")};c.a.m=function(e){e.__proto__=c.a.m.prototype;return e};c.a.m.prototype=Object.create(c.prototype);c.a.m.prototype.L=function(){return this};c.a.m.prototype.k=function(){return c.a.l([this[0].apply("*",d.cos.apply(h,this[1])),this[0].apply("*",
d.sin.apply(h,this[1]))])};c.a.m.prototype.D=function(){return this[0].apply("*",d.cos.apply(h,this[1]))};c.a.m.prototype.C=function(){return this[0].apply("*",d.sin.apply(h,this[1]))};c.a.m.prototype.r=function(c){return d.F.apply("^",d.T.apply("*",this[1])).apply("*",this[0].r(c).apply("+",d.T.apply("*",this[0]).apply("*",this[1].r(c))))};c.a.m.prototype.apply=function(e,b){if(b.constructor===this.constructor)switch(e){case h:case "*":return c.a.m([this[0].apply("*",b[0]),this[1].apply("+",b[1])]);
case "/":return c.a.m([this[0].apply("/",b[0]),this[1].apply("-",b[1])])}else if(b.constructor===c.f)switch(e){case h:case "*":return c.a.m([this[0].apply("*",b),this[1]]);case "/":return c.a.m([this[0].apply("/",b),this[1]]);case "+":case "-":case "^":return c.a.m([this[0],this[1].apply("*",b)])}else if(b.constructor===c.q)switch(e){case h:case "*":return c.a.m([this[0].apply("*",new c.f(b.h)),this[1].apply("+",new c.f(b.g))]);case "/":return c.a.m([this[0].apply("/",new c.f(b.h)),this[1].apply("-",
new c.f(b.g))])}};c.a.m.prototype.abs=function(){return this[0]};c.a.m.prototype.w=function(){return this[1]};c.a.m.prototype.constructor=c.a.m;c.prototype.D=function(){console.warn("TODO: don't calculate both parts (Expression.prototype.real)");return this.k()[0]};c.prototype.C=function(){console.warn("TODO: don't calculate both parts (Expression.prototype.imag)");return this.k()[1]};c.a.prototype.k=function(){console.error("Only the user can call this function");switch(this.v){case h:if(this[0].B&&
2===this.length)return this[0].B(this.v,this[1]);case "*":var e=this[0].k(),b=this[1].k();return c.a.l([e[0].apply("*",b[0]).apply("-",e[1].apply("*",b[1])),e[0].apply("*",b[1]).apply("+",e[1].apply("*",b[0]))]);case "@+":case "@-":return e=this[0].k(),c.a.l([e[0].apply(this.v),e[1].apply(this.v)]);case "+":case "-":return e=this[0].k(),b=this[1].k(),c.a.l([e[0].apply(this.v,b[0]),e[1].apply(this.v,b[1])]);case "/":var e=this[0].k(),b=this[1].k(),g=b[0].apply("*",b[0]).apply("+",b[1].apply("*",b[1]));
return c.a.l([e[0].apply("*",b[0]).apply("+",e[1].apply("*",b[1])).apply("/",g),e[1].apply("*",b[0]).apply("-",e[0].apply("*",b[1])).apply("/",g)]);case "^":var e=this[0].k(),b=this[1].k(),g=(new c.f(0.5)).apply("*",d.log.apply(h,e[0].apply("*",e[0]).apply("+",e[1].apply("*",e[1])))),f=d.atan2.apply(h,c.u([e[1],e[0]])),e=g.apply("*",b[1]).apply("+",f.apply("*",b[0])),b=d.F.apply("^",g.apply("*",b[0]).apply("-",f.apply("*",b[1])));return c.a.l([b.apply("*",d.cos.apply(h,e)),b.apply("*",d.sin.apply(h,
e))])}};c.a.l=function(e){e.__proto__=c.a.l.prototype;return e};c.a.l.prototype=Object.create(c.prototype);c.a.l.prototype.k=function(){return this};c.a.l.prototype.D=function(){return this[0]};c.a.l.prototype.C=function(){return this[1]};c.a.l.prototype.constructor=c.a.l;c.a.l.prototype.apply=function(e,b){if(b.constructor===this.constructor)switch(e){case "+":case "-":return c.a.l([this[0].apply(e,b[0]),this[1].apply(e,b[1])]);case h:case "*":return c.a.l([this[0].apply("*",b[0]).apply("-",this[1].apply("*",
b[1])),this[0].apply("*",b[1]).apply("+",this[1].apply("*",b[0]))]);case "/":var g=b[0].apply("*",b[0]).apply("+",b[1].apply("*",b[1]));return c.a.l([this[0].apply("*",b[0]).apply("+",this[1].apply("*",b[1])).apply("/",g),this[1].apply("*",b[0]).apply("-",this[0].apply("*",b[1])).apply("/",g)]);case "^":var f=(new c.f(0.5)).apply("*",d.log.apply(h,this[0].apply("*",this[0]).apply("+",this[1].apply("*",this[1])))),i=d.atan2.apply(h,c.u([this[1],this[0]])),g=f.apply("*",b[1]).apply("+",i.apply("*",
b[0])),f=d.F.apply("^",f.apply("*",b[0]).apply("-",i.apply("*",b[1])));return c.a.l([f.apply("*",d.cos.apply(h,g)),f.apply("*",d.sin.apply(h,g))])}else if(b.constructor===c.a.m)switch(e){case "*":case "/":return g=b[0].apply("*",b[0]),f=b.k(),c.a.l([this[0].apply("*",f[0]).apply("+",a[1].apply("*",f[1])).apply("/",g),this[1].apply("*",f[0]).apply("-",a[0].apply("*",f[1])).apply("/",g)]);case "^":case "+":case "-":return this.apply(e,b.k())}else{if(b.constructor===c.q)return this.apply(e,b.k());if(b.constructor===
c.o.d||b.constructor===c.a.d)return console.error("Duplicated an x! This makes it difficult to solve complex equations, I think"),this.apply(e,b.k())}j("CMPLX.LIST * "+e)};c.a.d=function(e,b){e.__proto__=c.a.d.prototype;b!==h&&(e.v=b);return e};c.a.d.prototype=Object.create(c.a.prototype);c.a.d.prototype.k=function(){return c.a.l([this,d.t])};c.a.d.prototype.D=function(){return this};c.a.d.prototype.C=function(){return d.t};c.a.d.prototype.L=function(){return c.a.m([c.a.d([d.abs,this]),c.a.d([d.w,
this])])};c.a.d.prototype.abs=function(){return c.a.d([d.abs,this])};c.a.d.prototype.w=function(){return c.a.d([d.w,this])};c.a.d.prototype.apply=c.o.d.prototype.apply;c.a.d.prototype.constructor=c.a.d;c.prototype.L=function(){var e=this.k();return c.a.m([e[0].apply("*",e[0]).apply("+",e[1].apply("*",e[1])),d.atan2.apply(h,c.u([e[1],r[0]]))])};c.prototype.abs=function(){console.warn("SLOW?");var c=this.k();return c[0].apply("*",c[0]).apply("+",c[1].apply("*",c[1]))};c.prototype.w=function(){console.warn("Slow?");
var e=this.k();return d.atan2.apply(h,c.u([e[1],r[0]]))};c.a.da=C();c.u=function(e){e.__proto__=c.u.prototype;return e};c.u.prototype=Object.create(c.a.prototype);c.u.prototype.apply=function(e,b){var d=this.length;switch(e){case ",":return this[d]=b,this;case h:case "*":d!=b.length&&j("Vector Dimension mismatch.");var f,i=n.z.t;for(f=0;f<d;f++)i=i.apply("+",this[f].apply("*",b[f]));return i;case "+":case "-":d!=b.length&&j("Vector Dimension mismatch.");i=Array(d);for(f=0;f<d;f++)i[f]=this[f].apply(e,
b[f]);return c.u(i);default:j("Vector operation not allowed.")}};c.u.prototype.k=function(){var e=this.length,b=Array(e),d=Array(e),f;for(f=0;f<e;f++){var i=this[f].k();b[f]=i[0];d[f]=i[1]}return c.a.l([c.u(b),c.u(d)])};c.u.prototype.constructor=c.u;c.prototype.apply=function(){j("UNKNOWN COMPLEX CART/POLAR")};c.prototype.valueOf=function(){j("ValueOf")};var N={"text/javascript":function(c,b){function d(b){return b.j<=f?"("+b.b+")":b.b}var f=u.M(c);switch(c){case "=":return{b:d(b[0])+c+d(b[1]),c:void 0,
j:f};case "&&":case "<":case ">":case ">=":case "<=":case "!==":case "!=":case "==":case "===":return{b:d(b[0])+c+d(b[1]),c:1,j:f};case "+":case "-":case "/":case "*":case "?":case ":":case ",":case ">>":case "<<":case "&":case "%":return{b:d(b[0])+c+d(b[1]),c:2,j:f};case "_":if(8===b[0].c&&(8===b[1].c||2==b[1].c))return{b:d(b[0])+c+d(b[1]),c:8,j:f};j("Operator '_' does not exist in javaScript for those types.");case "~":return{b:c+d(b[0]),c:2,j:f};case "@-":case "@+":return{b:c.substring(1)+d(b[0]),
c:2,j:f};case "^":return{b:"Math.pow("+b[0].b+","+b[1].b+")",c:2,j:f};case h:if(20===b[0].c)return{b:b[0].b+"("+b[1].b+")",c:2,j:f};f=u.M("*");return{b:d(b[0])+"*"+d(b[1]),c:2,j:f};case "#":return{b:"function(x){return "+b[0].b+"}",c:20,j:f};case "\u221a":return{b:"Math.sqrt("+b[0].b+")",c:2,j:f};case "!":return{b:"factorial("+b[1].b+")",c:2,j:f};default:j("Could not translate operator: '"+c+"' into javscript!")}},"x-shader/x-fragment":function(c,b){function d(b){return b.j<=f?"("+b.b+")":b.b}var f=
u.M(c);switch(c){case "&&":case "||":if(b[0].c===b[1].c&&6===b[1].c)return{b:d(b[0])+c+d(b[1]),c:6,j:f};j("Operands must also be boolean values");case "==":case "<":case ">":case "<=":case ">=":case "!=":return b[0].c!==b[1].c&&j("The equality operators and assignment operator are only allowed if the two operands are same size and type."),{b:d(b[0])+c+d(b[1]),c:6,j:f};case ":":return b[0].c!==b[1].c&&j("Switching groups must be the same type"),{b:d(b[0])+c+d(b[1]),c:b[1].c,j:f};case "?":return 6!==
b[0].c&&j("Must be boolean type"),{b:d(b[0])+c+d(b[1]),c:b[1].c,j:f};case "+":case "-":case ",":return b[0].c!==b[1].c&&j("Types don't match: "+b[0].c+", "+b[1].c),{b:d(b[0])+c+d(b[1]),c:4,j:f};case "*":case "/":return{b:d(b[0])+c+d(b[1]),c:4,j:f};case "_":j("Write this later.");case "~":return{b:c+d(b[0]),c:2,j:f};case "@-":case "@+":return{b:c.substring(1)+d(b[0]),c:4,j:f};case "^":return"2.718281828459045e+0"===b[0].b?{b:"exp("+b[1].b+")",c:4,j:f}:{b:"pow("+b[0].b+","+b[1].b+")",c:4,j:f};case h:if(20===
b[0].c)return{b:b[0].b+"("+b[1].b+")",c:4,j:f};f=u.M("*");return{b:d(b[0])+"*"+d(b[1]),c:4,j:f};case "#":j("Anonymous functions not supported.");case "\u221a":return{b:"sqrt("+b[0].b+")",c:4,j:f};case "!":return{b:"factorial("+b[0].b+")",c:4,j:f};case "%":return{b:"mod("+b[0].b+","+b[1].b+")",c:4,j:f};case "&":case "|":case "~":case ">>":case "<<":j("Reserved");default:j("Could not translate operator: '"+c+"' into glsl!")}},"text/latex":function(c,b){function d(b){return"\\left("+b+"\\right)"}function f(b,
f){return f?b.j<i?d(b.b):b.b:b.j===i?u.Y(c)===w?b.b:d(b.b):b.j<=i?d(b.b):b.b}var i=u.M(c);switch(c){case "/":return{b:"\\frac{"+b[0].b+"}{"+b[1].b+"}",c:2,j:i};case "^":case "_":return{b:f(b[0])+c+"{"+b[1].b+"}",c:8,j:i};case h:return"\\sqrt"===b[0].b?{b:"\\sqrt{"+b[1].b+"}",c:2,j:i}:"\\abs"===b[0].b?{b:"\\left|"+b[1].b+"\\right|",c:2,j:i}:{b:f(b[0],1)+" "+f(b[1],1),c:2,j:i};case "#":return{b:c+d(b[0].b),c:void 0};case ",":return{b:"\\left("+b.map(f).join(c)+"\\right)",c:7,j:i}}return"@"==c[0]?{b:c[1]+
f(b[0]),c:2,j:i}:u.U(c)?{b:f(b[0])+c,c:2,j:i}:{b:b.map(f).join({"*":" ","\u2228":"\\vee ","&&":"\\wedge ","\u00b1":"\\pm ","\u2218":"\\circ "}[c]||c),c:2,j:i}}};c.a.prototype.n=function(c){return N[c](this.v,Array.prototype.map.apply(this,[function(b){return b.n(c)}]))};c.a.m.prototype.n=function(c){"text/latex"!==c&&j("Exporting not supported for complex values.");return{b:this[0].n(c).b+"\\cdot e^{i"+this[1].n(c).b+"}",c:2}};c.a.l.prototype.n=function(c){"text/latex"!==c&&j("Exporting not supported for complex values.");
return{b:this[0].n(c).b+"+ i("+this[1].n(c).b+")",c:2}};c.s.prototype.n=function(c){L("NumericalComplex.toTypedString????");if("text/latex"===c){if(this===d.T)return{b:"i",c:2};var b=this.k();return 0===this.h?1===this.g?{b:"i",c:2}:-1===this.g?{b:"-i",c:2}:{b:b[1].n(c).b+"i",c:2}:0===this.g?{b:b[0].n(c).b,c:2}:1===this.g?{b:b[0].n(c).b+" + i",c:2}:-1===this.g?{b:b[0].n(c).b+" - i",c:2}:0>this.g?{b:b[0].n(c).b+" + "+b[1].n(c).b+"i",c:2}:{b:b[0]+" + "+b[1].n(c).b+"i",c:2}}j("Please use x.realimag()[0 /* or 1 */].toTypedString() to generate code.")};
c.f.prototype.n=function(c){switch(c){case "text/javascript":return this===d.F?{b:"Math.E",c:2}:this===d.R?{b:"Math.PI",c:2}:Infinity===this.value?"Infinity":{b:this.value.toString(),c:2};case "x-shader/x-fragment":return c=this.value.toExponential(),-1===c.indexOf(".")&&(c=c.replace("e",".e")),{b:c,c:4};case "text/latex":var b;this===d.F?b="e":this===d.R?b="\\pi":this===d.S&&(b="\\infty");return{b:b||this.value.toString().replace(/e([\d\.]+)/,"\\cdot 10^{$1}").replace(/e-([\d\.]+)/,"\\cdot 10^{-$1}"),
c:2}}};c.u.prototype.n=function(c){var b="[",d="]";"x-shader/x-fragment"===c&&(b="vec"+this.length+"(",d=")");return{b:b+Array.prototype.map.apply(this,[function(b){return b.n(c).b}]).join(", ")+d,c:7}};c.o.prototype.n=function(c){var b=this.I,d=8;"text/javascript"!==c&&("x-shader/x-fragment"===c?(d=4,Math[b]&&(d=20)):1<b.length&&(b="\\"+b));return{b:b,c:d}};c.W=c.q;d.sin={apply:function(e,b){switch(b.constructor){case c.q:var g=Math.exp(b.g);return new c.q(Math.sin(b.h)*((g+1/g)/2),Math.cos(b.h)*
((g-1/g)/2));case c.f:return new c.f(Math.sin(b));case c.a.d:case c.o.d:return c.a.d([d.sin,b]);default:return c.a([d.sin,b])}},B:function(e,b){switch(b.constructor){case c.q:j("???");case c.f:j("???");case c.a:var g=b.k(),f=d.F.apply("^",g[1]),i=d.A.apply("/",f),m=new c.f(2),k=f.apply("+",i).apply("/",m),f=f.apply("-",i).apply("/",m);return[d.sin.apply(h,g[0]).apply("*",k),d.cos.apply(h,g[0]).apply("*",f)];default:return console.error("realimag unchecked!"),[c.a([d.sin,b]),n.z.t]}},Q:function(c,
b,g){return d.cos.apply(h,b).apply("*",b.r(g))},"text/latex":"\\sin","text/javascript":"Math.sin","x-shader/x-fragment":"sin",n:function(c){return{b:this[c],c:20}},title:"Sine Function",description:"See http://en.wikipedia.org/wiki/Trigonometric_functions#Sine.2C_cosine.2C_and_tangent",G:["\\sin (\\pi)"],H:["cos","tan"]};d.cos={apply:function(e,b){switch(b.constructor){case c.q:var g=Math.exp(b.g);return new c.q(Math.cos(b.h)*((g+1/g)/2),-Math.sin(b.h)*((g-1/g)/2));case c.f:return new c.f(Math.cos(b));
case c.a.d:case c.o.d:return c.a.d([d.cos,b]);default:return c.a([d.cos,b])}},B:function(e,b){switch(b.constructor){case c.q:j("???");case c.f:j("???");case c.a:var g=b.k(),f=d.F.apply("^",g[1]),i=d.A.apply("/",f),m=new c.f(2),k=f.apply("+",i).apply("/",m),f=i.apply("-",f).apply("/",m);return[d.cos.apply(h,g[0]).apply("*",k),d.sin.apply(h,g[0]).apply("*",f)];default:return console.error("realimag unchecked!"),[c.a([d.cos,b]),n.z.t]}},Q:function(e,b,g){return d.sin.apply(h,b).apply("*",b.r(g)).apply("*",
new c.f(-1))},"text/latex":"\\cos","text/javascript":"Math.cos","x-shader/x-fragment":"cos",n:function(c){return{b:this[c],c:20}},title:"Cosine Function",description:"Cosine Function desc",G:["\\cos (\\pi)"],H:["sin","tan"]};d.log={apply:function(e,b,g){switch(b.constructor){case c.q:j("Not ready Type!: "+b.constructor);case c.f:if(0<b.value)return new c.f(Math.log(b));j("-Log");case c.a.d:case c.o.d:if(g&&massumptions.fa)return c.a.d([d.log,b]);default:return c.a([d.log,b])}},B:function(e,b){switch(b.constructor){case c.a:b.k();
default:return console.error("realimag unchecked!"),[c.a([d.log,b]),n.z.t]}},r:function(c){return d.A.apply("/",c)},Q:function(c,b,g){return d.A.apply("/",b).apply("*",b.r(g))},"text/latex":"\\log","text/javascript":"Math.log","x-shader/x-fragment":"log",n:function(c){return{b:this[c],c:20}},title:"Natural Logarithm",description:"Base e. See http://en.wikipedia.org/wiki/Natural_logarithm",G:["\\log (ye^(2x))"],H:["exp","Log"]};d.atan2={apply:function(e,b){console.log("Apply atan2");switch(b[0].constructor){case c.q:switch(b[1].constructor){case c.q:j("???");
case c.f:j("???")}case c.f:switch(b[1].constructor){case c.q:j("???");case c.f:return new c.f(Math.atan2(b[0],b[1]))}case c.a.d:return c.a.d([d.atan2,b])}return c.a([d.atan2,b])},B:function(e,b){return[c.a([d.atan2,b]),n.z.t]},"text/latex":"\\atan2","text/javascript":"Math.atan2","x-shader/x-fragment":"atan",n:function(c){return{b:this[c],c:20}},title:"Two argument arctangent function",description:"Arctan(y, x). Will equal arctan(y / x) except when x and y are both negative. See http://en.wikipedia.org/wiki/Atan2"};
d.atan=d.atan2;d.Gamma={apply:function(e,b){function g(b){var c,d,e,g,h=[57.15623566586292,-59.59796035547549,14.136097974741746,-0.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];0>=b&&j("bad arg in gammln");e=b;d=b+5.2421875;d=(b+0.5)*Math.log(d)-d;g=0.9999999999999971;for(c=0;14>c;c++)g+=h[c]/++e;return d+Math.log(2.5066282746310007*
g/b)}switch(b.constructor){case c.q:return new c.q(5,3);case c.f:return b+=0,0===b?d.S:0>b?new c.f(-Math.PI/(b*Math.sin(Math.PI*b)*Math.exp(g(-b)))):new c.f(Math.exp(g(b)));default:return c.a([d.P,b])}},"text/latex":"\\Gamma","text/javascript":"M.Global.Gamma.f",n:function(c){return{b:this[c],c:20}},title:"Gamma Function",description:"See http://en.wikipedia.org/wiki/Gamma_function",G:["\\Gamma (x)","x!"],H:["Log","LogGamma"]};d.Re={apply:function(c,b){return b.D()},B:function(c,b){return[b.D(),d.t]},
"text/latex":"\\Re"};d.Im={apply:function(c,b){return b.C()},ca:w,B:function(c,b){return[b.C(),d.t]},"text/latex":"\\Im"};d.sqrt={apply:function(e,b){switch(b.constructor){case c.q:if(0===b.g)return new c.q(Math.sqrt(b.h),0);case c.f:return new c.aa(Math.sqrt(b));case c.a.d:case c.a:if("^"===b.v)return d.abs.apply(h,b[0].apply("^",b[1].apply("/",new c.f(2))));default:return c.a([d.sqrt,b])}},B:function(d,b){return b.apply("^",new c.f(0.5)).k()},"text/latex":"\\sqrt","text/javascript":"Math.sqrt",
"x-shader/x-fragment":"sqrt",n:function(c){return{b:this[c],c:20}},title:"Sqrt Function",description:"See http://en.wikipedia.org/wiki/Square_Root",G:["\\sqrt (x^4)"],H:["pow","abs","mod"]};d.abs={apply:function(c,b){console.warn("ABS IS FOR USER INPUT ONLY. USE .abs()");return b.abs()},"text/latex":"\\abs","text/javascript":"Math.abs",n:function(c){return{b:this[c],c:20}},r:function(c){return c.apply("/",c.abs())},Q:function(c,b,d){return b.apply("/",b.abs()).apply("*",b.r(d))},$:"Absolute Value Function",
description:"Abs",G:["\\abs (-3)","\\abs (i+3)"],H:["arg","tan"]};d.arg={apply:function(c,b){console.warn("ARG IS FOR USER INPUT ONLY. USE .arg()");return b.w()},"text/latex":"\\arg","text/javascript":"Math.arg_real",n:function(c){return{b:this[c],c:20}},$:"Arg Function",description:"Arg",G:["\\arg (-3)","\\arg (3)","\\arg(3+2i)"],H:["abs"]};d.e=new c.f(Math.E);d.e.title="e";d.e.description="The transcendental number that is the base of the natural logarithm, approximately equal to 2.71828.";d.pi=
new c.f(Math.PI);d.pi.title="Pi";d.pi.description="";d.Infinity=new c.f(Infinity);d.Infinity.title="Infinity";d.Infinity.description="";d.Zero=new c.f(0);d.Zero.title="Zero";d.Zero.description="Additive Identity";d.One=new c.f(1);d.One.title="One";d.One.description="Multiplicative Identity";d.i=new c.s(0,1);d.i.title="Imaginary Unit";d.i.description="A number which satisfies the property <m>i^2 = -1</m>.";d.i.k=function(){return c.a.l([d.t,d.A])};n.toString=function(){return"function M() {\n    [awesome code]\n}"};
n.toString.toString=n.toString;n.Context=d;n.Global=d})("undefined"===typeof window?module:window);
;}(window));
